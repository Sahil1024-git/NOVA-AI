<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NOVA AI</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="icon" type="image/gif" href="images/Screenshot 2025-09-24 201423.png"> 
<style>
/* Universal Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box; 
}

:root {
--dark-bg: #000000;
--text-color: #e0e0e0;
--primary-purple: #8a2be2; 
--secondary-purple: #d8b4fe; 
--input-bg: rgba(28, 14, 48, 0.9);
--navbar-bg: rgba(0, 0, 0, 0.9);
}

/* Improved body & main structure */
body {
background-color: var(--dark-bg);
margin: 0; 
font-family: 'Montserrat', sans-serif;
color: var(--text-color);
overflow-x: hidden;
min-height: 100vh;
display: flex;
flex-direction: column;
position: relative;
z-index: 1;
background-image: url(images/BlackAndWhiteLoopGIFbyPi-Slices-ezgif.com-crop.gif);
}

.hero-section {
flex: 1;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
text-align: center;
padding: 50px 20px;
padding-top: 50px; 
position: relative;
z-index: 5;
width: 100%;
max-width: 1200px; 
margin: 0 auto; 
}

.hero-background {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
overflow: hidden;
z-index: 0;
pointer-events: none;
}

.glow-top, .glow-bottom {
position: absolute;
border-radius: 50%;
filter: blur(150px); 
opacity: 0.25;
}

.glow-top {
width: 800px;
height: 300px;
background: radial-gradient(circle, var(--secondary-purple) 0%, transparent 70%);
top: -50px;
left: 50%;
transform: translateX(-50%);
}

.glow-bottom {
width: 900px;
height: 400px;
background: radial-gradient(circle, var(--secondary-purple) 0%, transparent 70%);
bottom: -100px;
left: 50%;
transform: translateX(-50%);
}

/* Navbar */
.navbar {
display: flex;
justify-content: space-between;
align-items: center;
padding: 20px 50px;
backdrop-filter: blur(5px);
position: fixed; 
top: 0;
left: 0;
width: 100%; 
background-color: var(--dark-bg); 
z-index: 10;
}

.logo {
display: flex;
align-items: center;
font-size: 24px;
font-weight: 700;
color: white;
text-shadow: 0 0 5px rgba(255,255,255,0.3);
font-family: 'Rajdhani', sans-serif;
}

.logo img {
margin-right: 10px;
border-radius: 5px;
}

/* Nav Links and Buttons */
.nav-links {
display: flex; 
gap: 10px; 
}
.nav-links a {
color: var(--text-color);
text-decoration: none;
font-weight: 500;
transition: all 0.3s ease;
margin: 0; 
}

.nav-link-btn {
color: var(--text-color);
padding: 8px 15px; 
border-radius: 20px; 
display: inline-block; 
}

.nav-link-btn:hover {
color: white;
border-color: var(--secondary-purple);
background-color: rgba(138, 43, 226, 0.1); 
box-shadow: 0 0 15px var(--primary-purple), 0 0 20px var(--secondary-purple); 
transform: translateY(-2px); 
}

/* Button Press Animation */
.get-started-btn:active,
#ask-ai-btn:active,
.learn-more-btn:active,
.nav-link-btn:active {
transform: scale(0.95);
box-shadow: none; 
transition: transform 0.1s;
}

/* Get Started Button */
.get-started-btn {
background: linear-gradient(to right, var(--primary-purple), var(--secondary-purple));
color: white;
border: none;
padding: 10px 25px;
border-radius: 25px;
cursor: pointer;
font-size: 16px;
font-weight: 600;
transition: all 0.3s ease; 
display: flex;
align-items: center;
gap: 8px;
box-shadow: 0 0 10px rgba(138, 43, 226, 0.4);
}

.get-started-btn:hover {
transform: translateY(-3px) scale(1.02);
box-shadow: 0 0 20px rgba(138, 43, 226, 0.8), 0 0 30px rgba(216, 180, 254, 0.6); 
background: linear-gradient(to right, #9d4bff, #e8caff); 
}

/* Hero Title */
.hero-title {
font-family: 'Rajdhani', sans-serif;
font-size: 68px; 
font-weight: 700;
line-height: 1.2;
margin-bottom: 20px;
color: white;
text-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
margin-top: 0; 
margin-bottom: 50px; 
transition: opacity 0.5s ease-out, transform 0.5s ease-out, visibility 0.5s, margin 0.5s;
}

.hero-title.fade-out-up {
opacity: 0;
transform: translateY(-50px);
visibility: hidden;
margin-top: 0;
margin-bottom: 0;
}

/* Hero Buttons (for Learn More) */
.hero-buttons {
display: flex;
gap: 20px;
margin-top: 0; 
z-index: 5;
transition: opacity 0.5s ease-out, transform 0.5s ease-out, visibility 0.5s, height 0.5s, margin 0.5s;
}

.hero-buttons.fade-out-up {
opacity: 0;
transform: translateY(-50px);
visibility: hidden;
height: 0; 
overflow: hidden;
margin-top: 0;
}

/* AI INPUT STYLES */
.ai-input-container {
display: flex;
width: 100%;
max-width: 800px; 
background-color: var(--input-bg);
border-radius: 30px;
padding: 8px;
border: 1px solid var(--primary-purple);
box-shadow: 0 0 20px rgba(138, 43, 226, 0.2);
z-index: 5;
margin-bottom: 20px; 
transition: box-shadow 0.3s ease, border-color 0.3s ease, transform 0.6s ease-out, margin 0.6s ease-out;
transform: translateY(0); 
margin-top: 0;
}

.ai-input-container.move-down {
/* Pushes the input down below the AI response */
margin-top: 30px; 
}

.ai-input-container:focus-within {
border-color: var(--secondary-purple);
box-shadow: 0 0 10px var(--primary-purple), 0 0 30px var(--secondary-purple);
}

#ai-user-input {
flex-grow: 1;
background: transparent;
border: none;
outline: none;
color: white;
padding: 0 15px;
font-size: 16px;
}

#ask-ai-btn {
background: linear-gradient(to right, var(--primary-purple), var(--secondary-purple));
color: white;
border: none;
padding: 10px 25px;
border-radius: 25px;
cursor: pointer;
font-size: 16px;
font-weight: 600;
transition: all 0.3s ease;
box-shadow: 0 0 10px rgba(138, 43, 226, 0.4);
padding-top: 10px;
}

#ask-ai-btn:hover {
transform: translateY(-2px);
box-shadow: 0 0 20px rgba(138, 43, 226, 0.8), 0 0 30px rgba(216, 180, 254, 0.6);
background: linear-gradient(to right, #9d4bff, #e8caff);
}

/* AI Response Display Container - Now the history container */
.chat-history-container { 
width: 90%;
max-width: 1000px;
z-index: 4; 
text-align: center;
margin-top: 50px; /* Space above response */
}

/* AI Response Result - The text element for EACH chat block */
.ai-response-result {
font-family: 'Rajdhani', sans-serif;
font-size: 32px; 
font-weight: 500; 
line-height: 1.5; 
color: white; 
text-shadow: none; 
opacity: 1; 
transform: none;
transition: none;
white-space: pre-wrap; /* Preserve line breaks from AI response */
text-align: left; /* Align response text to the left */
margin: 30px auto; /* ðŸ”‘ IMPORTANT: Margin to separate chat blocks */
max-width: 800px; 
}

/* Small query text above the large response */
.ai-response-query {
font-size: 18px;
font-weight: 500;
color: var(--secondary-purple);
opacity: 0.8;
margin-bottom: 10px; /* ðŸ”‘ Reduced margin for tighter grouping */
display: block; 
text-align: center;
}

/* Responsive Adjustments */
@media (max-width: 900px) {
.navbar {
flex-direction: column;
padding: 15px 20px;
}
.nav-links {
margin: 15px 0;
}
.hero-title {
font-size: 45px;
}
.ai-response-result {
font-size: 24px;
}

.chat-history-container {
/* Adjusted position for smaller screens */
margin-top: 30px; 
}

.ai-input-container {
max-width: 90%; 
flex-direction: column;
padding: 8px 8px 12px 8px; 
transform: translateY(0); 
}

.ai-input-container.move-down {
/* Mobile move down position */
margin-top: 50px; 
}

#ai-user-input {
padding: 5px 15px 15px 15px;
}
#ask-ai-btn {
width: 100%;
padding: 12px;
}
}
</style>
</head>
<body>
    
<div class="hero-background">
<div class="glow-top"></div>
<div class="glow-bottom"></div>
</div>

<header class="navbar">
<div class="logo">
<img src="images/glitchgifartistGIFbyEricaAnderson-ezgif.com-crop (1).gif" alt="NOVA Logo" style="width:30px; height:auto;"> 
<span>NOVA.</span> </div>
<nav class="nav-links">
<a href="#" class="nav-link-btn">New Chat</a>
<a href="#" class="nav-link-btn">Features</a>
<a href="#" class="nav-link-btn">Library</a>
<a href="#" class="nav-link-btn">Token</a>
<a href="#" class="nav-link-btn">Contact</a>
</nav>
<button class="get-started-btn">Get Started!<span class="arrow">â†’</span></button>
</header>

<main class="hero-section">
<h1 class="hero-title" id="hero-title">NOVA. Intelligence, unchained.</h1>
    
<div class="chat-history-container" id="chat-history-container">
    </div>

<div class="ai-input-container">
<input type="text" id="ai-user-input" placeholder="Ask NOVA.   " autofocus>
<button id="ask-ai-btn">Listen NOVA</button>
</div>
    
<div class="hero-buttons" id="hero-buttons">
<a href="#" class="learn-more-btn">Learn More â†’</a> 
</div>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const userInput = document.getElementById('ai-user-input');
    const askAiBtn = document.getElementById('ask-ai-btn');
    const heroTitle = document.getElementById('hero-title');
    const heroButtons = document.getElementById('hero-buttons');
    // ðŸ”‘ NEW ID: Container for all chat blocks
    const chatHistoryContainer = document.getElementById('chat-history-container'); 
    const aiInputContainer = document.querySelector('.ai-input-container'); 
    // ðŸ”‘ NEW: Select the "New Chat" button (the first anchor tag in .nav-links)
    const newChatButton = document.querySelector('.nav-links a:first-child'); 

    // ðŸ”‘ API KEY: Replaced with the key you provided.
    const API_KEY = "AIzaSyD6mafRUb0kLHtpr1BQBLskt9KFa8qyvY0"; 
    const API_ENDPOINT = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=" + API_KEY;

    // ðŸ”‘ NEW: Array to store the conversation history for multi-turn chats
    let chatHistory = []; 

    // Typewriter Effect Function with Dynamic Speed
    function typewriterEffect(element, text) {
        return new Promise(resolve => {
            let i = 0;
            element.innerHTML = ''; 
            
            const speed = text.length > 200 ? 5 : 15; 

            const timer = setInterval(() => {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                } else {
                    clearInterval(timer);
                    resolve(); 
                }
            }, speed);
        });
    }

    // Function to call the API
    async function getAIResponse(prompt) {
        try {
            // Prepare the contents array, including history for context
            const contents = [
                ...chatHistory, // Add existing history
                { role: "user", parts: [{ text: prompt }] } // Add the new user prompt
            ];

            const response = await fetch(API_ENDPOINT, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: contents,
                })
            });

            const data = await response.json();

            if (data.error) {
                console.error("API Error:", data.error.message);
                return { error: true, text: `API Error: ${data.error.message}. Please check your key's status.` };
            }

            const text = data.candidates?.[0]?.content?.parts?.[0]?.text;

            if (!text) {
                console.error("Response Empty:", data);
                return { error: true, text: "AI could not generate a response. (Reason: Blocked, No content, or Quota issue.)" };
            }

            return { error: false, text: text };

        } catch (e) {
            console.error("Network Fetch Error:", e);
            return { error: true, text: `Network Error: Could not connect to the API.` };
        }
    }

    // ðŸ”‘ NEW: Function to create and append a new chat block
    function createChatBlock(userQuery, placeholderText) {
        // Create the main container for this query/response pair
        const chatBlock = document.createElement('div');
        chatBlock.className = 'ai-response-result';
        
        // Add the query text
        const queryDiv = document.createElement('div');
        queryDiv.className = 'ai-response-query';
        queryDiv.textContent = `Query: ${userQuery}`;
        chatBlock.appendChild(queryDiv);
        
        // Add the response span (for typewriter effect)
        const responseSpan = document.createElement('span');
        responseSpan.style.color = 'white'; // Default color
        responseSpan.innerHTML = placeholderText; // Initial text (e.g., loading)
        chatBlock.appendChild(responseSpan);
        
        // Append to the history container
        chatHistoryContainer.appendChild(chatBlock);

        // Scroll to the latest message
        chatBlock.scrollIntoView({ behavior: 'smooth', block: 'end' });

        return { chatBlock, responseSpan };
    }

    // Main interaction handler with animation logic
    async function handleAskAI() {
        const prompt = userInput.value.trim();
        if (prompt === '') return;

        const userQuery = prompt;
        userInput.value = ''; // Clear input immediately

        // 1. Start the hero text and buttons animation out (only once)
        if (!heroTitle.classList.contains('fade-out-up')) {
            heroTitle.classList.add('fade-out-up');
            heroButtons.classList.add('fade-out-up');
            aiInputContainer.classList.add('move-down');
        }

        // 2. Create the chat block and show loading state
        const { responseSpan } = createChatBlock(userQuery, 'Connecting to NOVA AI...');

        askAiBtn.disabled = true;
        askAiBtn.textContent = 'Processing...';

        // Get AI Response
        const aiResult = await getAIResponse(userQuery);

        let displayText = aiResult.text;
        let textColor = aiResult.error ? 'red' : 'white'; 
        
        // 3. Update the content and perform typewriter animation
        responseSpan.style.color = textColor;

        // Call Typewriter Animation
        await typewriterEffect(responseSpan, displayText); 

        // ðŸ”‘ Update chat history for the next turn (only if successful)
        if (!aiResult.error) {
            chatHistory.push({ role: "user", parts: [{ text: userQuery }] });
            chatHistory.push({ role: "model", parts: [{ text: displayText }] });
        }

        askAiBtn.disabled = false;
        askAiBtn.textContent = 'ASK AI';

        // Ensure we scroll to the bottom after the typewriter is done
        responseSpan.scrollIntoView({ behavior: 'smooth', block: 'end' });
    }

    // ðŸ”‘ NEW: Function for the "New Chat" button
    function handleNewChat() {
        // Clear all previous queries and replies
        chatHistoryContainer.innerHTML = ''; 
        
        // Reset chat history array for new session
        chatHistory = []; 

        // Reset the introductory elements
        heroTitle.classList.remove('fade-out-up');
        heroButtons.classList.remove('fade-out-up');
        aiInputContainer.classList.remove('move-down');

        userInput.value = '';
        userInput.focus();
    }

    askAiBtn.addEventListener('click', handleAskAI);
    
    // Bind the "New Chat" functionality
    newChatButton.addEventListener('click', (e) => {
        e.preventDefault(); 
        handleNewChat();
    });

    userInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault(); 
            handleAskAI();
        }
    });

});
</script>
</body>
</html>
